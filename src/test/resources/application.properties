# Test configuration properties for integration tests
# Avoids hardware dependencies (models, binaries, audio devices)

spring.application.name=speakToMack-test

# Server
server.port=0

# Audio Validation - Permissive for tests
audio.validation.min-duration-ms=100
audio.validation.max-duration-ms=300000

# STT Engine Configuration - Vosk (non-existent paths for tests)
stt.vosk.model-path=/tmp/does-not-exist-vosk
stt.vosk.sample-rate=16000
stt.vosk.max-alternatives=1

# STT Engine Configuration - Whisper (non-existent paths for tests)
stt.whisper.binary-path=/tmp/does-not-exist-whisper
stt.whisper.model-path=/tmp/does-not-exist-model
stt.whisper.timeout-seconds=10
stt.whisper.language=en
stt.whisper.threads=1
stt.whisper.max-stdout-bytes=1048576
stt.whisper.output=text

# STT Orchestration
stt.enabled-engines=vosk,whisper
stt.parallel.timeout-ms=10000
stt.orchestration.primary-engine=VOSK
stt.orchestration.silence-gap-ms=0

# STT Reconciliation
stt.reconciliation.enabled=true
stt.reconciliation.strategy=overlap
stt.reconciliation.overlap-threshold=0.6
stt.reconciliation.confidence-threshold=0.7

# STT Concurrency - Minimal for tests
stt.concurrency.vosk-max=1
stt.concurrency.whisper-max=1
stt.concurrency.acquire-timeout-ms=100

# Thread Pool Configuration - Minimal for tests
threadpool.stt.core-pool-size=1
threadpool.stt.max-pool-size=2
threadpool.stt.queue-capacity=5
threadpool.stt.keep-alive-seconds=30
threadpool.stt.thread-name-prefix=test-stt-pool-

threadpool.event.core-pool-size=1
threadpool.event.max-pool-size=2
threadpool.event.queue-capacity=5
threadpool.event.keep-alive-seconds=30
threadpool.event.thread-name-prefix=test-event-pool-

# STT Engine Watchdog - Disabled for tests
stt.watchdog.enabled=false
stt.watchdog.window-minutes=60
stt.watchdog.max-restarts-per-window=3
stt.watchdog.cooldown-minutes=10

# Model validation - Disabled for tests
stt.validation.enabled=false

# Audio capture - Test defaults
audio.capture.chunk-millis=40
audio.capture.max-duration-ms=60000

# Actuator - Minimal exposure for tests
management.endpoints.web.exposure.include=health,info
management.endpoints.web.base-path=/actuator
management.endpoint.health.show-details=always

# Graceful shutdown - Short timeout for tests
server.shutdown=graceful
spring.lifecycle.timeout-per-shutdown-phase=5s

# Hotkey - Test defaults (not used in integration tests)
hotkey.type=modifier-combo
hotkey.key=J
hotkey.modifiers=META,CONTROL
hotkey.toggle-mode=false

# Typing - Test defaults
typing.chunk-size=800
typing.inter-chunk-delay-ms=10
typing.focus-delay-ms=50
typing.restore-clipboard=false
typing.clipboard-only-fallback=false
typing.normalize-newlines=LF
typing.trim-trailing-newline=true
typing.enable-robot=false
