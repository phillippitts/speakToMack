spring.application.name=speakToMack

# Audio Validation
audio.validation.min-duration-ms=250
audio.validation.max-duration-ms=300000

# STT Engine Configuration - Vosk (fast, JNI-based)
stt.vosk.model-path=models/vosk-model-small-en-us-0.15
stt.vosk.sample-rate=16000
stt.vosk.max-alternatives=1

# STT Engine Configuration - Whisper (accurate, process-based)
stt.whisper.binary-path=tools/whisper.cpp/main
stt.whisper.model-path=models/ggml-base.en.bin
stt.whisper.timeout-seconds=10
stt.whisper.language=en
stt.whisper.threads=4
stt.whisper.max-stdout-bytes=1048576
# Output mode for whisper stdout: text | json (default text for safety)
stt.whisper.output=text

# STT Orchestration
stt.enabled-engines=vosk,whisper
stt.parallel.timeout-ms=10000
stt.orchestration.primary-engine=vosk

# STT Reconciliation (Phase 4) - Enabled by default for dual-engine quality
stt.reconciliation.enabled=true
stt.reconciliation.strategy=simple
stt.reconciliation.overlap-threshold=0.6

# STT Concurrency caps (lightweight bulkheads)
stt.concurrency.vosk-max=4
stt.concurrency.whisper-max=2
stt.concurrency.acquire-timeout-ms=1000

# STT Engine Watchdog (auto-restart with sliding window budget)
stt.watchdog.enabled=true
stt.watchdog.window-minutes=60
stt.watchdog.max-restarts-per-window=3
stt.watchdog.cooldown-minutes=10

# Fail-fast model validation (disable only for special test profiles)
stt.validation.enabled=true

# Audio capture defaults
audio.capture.chunk-millis=40
audio.capture.max-duration-ms=60000
# audio.capture.device-name=

# Spring Boot Actuator - Production monitoring and health checks
management.endpoints.web.exposure.include=health,info,metrics,prometheus
management.endpoints.web.base-path=/actuator
management.endpoint.health.show-details=when-authorized
management.health.defaults.enabled=true


# Graceful shutdown - wait up to 30s for requests to complete
server.shutdown=graceful
spring.lifecycle.timeout-per-shutdown-phase=30s

# Hotkey defaults (Task 3.2/3.3)
hotkey.type=single-key
hotkey.key=RIGHT_META
# hotkey.modifiers=
# hotkey.threshold-ms=300
# Reserved OS shortcuts to warn about (platform-aware; adjust as needed)
# macOS: META+TAB (Cmd+Tab), Windows: META+L (Win+L)
# hotkey.reserved=META+TAB,META+L

# Typing / Fallback defaults (Task 3.4)
typing.chunk-size=800
typing.inter-chunk-delay-ms=30
typing.focus-delay-ms=100
typing.restore-clipboard=true
typing.clipboard-only-fallback=false
typing.normalize-newlines=LF
typing.trim-trailing-newline=true
typing.enable-robot=true
# typing.paste-shortcut=os-default
